<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>메뉴 모달 페이지</title>
    <link rel="stylesheet" href="../../common/modern-reset.css" />
    <link rel="stylesheet" href="./ediya-menu-modal-page.css" />
  </head>
  <body>
    <ul class="list-drink-menu">
      <li class="card-drink-product">
        <div class="item-drink-product hover-trigger-area">
          <img src="../../assets/ediya-menu-modal/iced-sakura-latte.webp" alt="아이스 사쿠라 라떼" />
          <h3 class="name-drink-product">ICED 벚꽃라떼</h3>
          <div class="container-modal-drink-product">
            <div class="modal-drink-product">
              <button type="button" class="modal-close-btn" aria-label="닫기">&times;</button>
              <div class="modal-drink-name-description">
                <h3>ICED 벚꽃라떼</h3>
                <h3>Cherry Blossom Latte</h3>
                <p>은은한 벚꽃향과 라즈베리 화이트 초콜릿 토핑이 올라간 핑크빛 라떼</p>
              </div>
              <div class="modal-specifications">
                <dl class="modal-specifications-left">
                  <dt>칼로리</dt>
                  <dd>(393kcal)</dd>
                  <dt>당류</dt>
                  <dd>(35g)</dd>
                  <dt>단백질</dt>
                  <dd>(7g)</dd>
                </dl>
                <dl class="modal-specifications-right">
                  <dt>포화지방</dt>
                  <dd>(18.6g)</dd>
                  <dt>나트륨</dt>
                  <dd>(149mg)</dd>
                  <dt>카페인</dt>
                  <dd>(0mg)</dd>
                </dl>
              </div>
            </div>
          </div>
        </div>
      </li>
      <li class="card-drink-product">
        <div class="item-drink-product hover-trigger-area">
          <img src="../../assets/ediya-menu-modal/hot-sakura-latte.webp" alt="핫 사쿠라 라떼" />
          <h3 class="name-drink-product">HOT 벚꽃라떼</h3>
          <div class="container-modal-drink-product">
            <div class="modal-drink-product">
              <button type="button" class="modal-close-btn" aria-label="닫기">&times;</button>
              <div class="modal-drink-name-description">
                <h3>HOT 벚꽃라떼</h3>
                <h3>Cherry Blossom Hot Latte</h3>
                <p>은은한 벚꽃향과 라즈베리 화이트 초콜릿 토핑이 올라간 핑크빛 라떼</p>
              </div>
              <div class="modal-specifications">
                <dl class="modal-specifications-left">
                  <dt>칼로리</dt>
                  <dd>(393kcal)</dd>
                  <dt>당류</dt>
                  <dd>(35g)</dd>
                  <dt>단백질</dt>
                  <dd>(7g)</dd>
                </dl>
                <dl class="modal-specifications-right">
                  <dt>포화지방</dt>
                  <dd>(18.6g)</dd>
                  <dt>나트륨</dt>
                  <dd>(149mg)</dd>
                  <dt>카페인</dt>
                  <dd>(0mg)</dd>
                </dl>
              </div>
            </div>
          </div>
        </div>
      </li>
      <li class="card-drink-product">
        <div class="item-drink-product hover-trigger-area">
          <img src="../../assets/ediya-menu-modal/iced-brow.webp" alt="아이스 브라우니 쇼콜라" />
          <h3 class="name-drink-product">ICED 브라우니 쇼콜라</h3>
          <div class="container-modal-drink-product">
            <div class="modal-drink-product">
              <button type="button" class="modal-close-btn" aria-label="닫기">&times;</button>
              <div class="modal-drink-name-description">
                <h3>ICED 브라우니 쇼콜라</h3>
                <h3>ICED Brow shocol</h3>
                <p>은은한 브라우니 향과 쇼콜라가 토핑된 시원하고 달달한 브라우니 쇼콜라</p>
              </div>
              <div class="modal-specifications">
                <dl class="modal-specifications-left">
                  <dt>칼로리</dt>
                  <dd>(393kcal)</dd>
                  <dt>당류</dt>
                  <dd>(35g)</dd>
                  <dt>단백질</dt>
                  <dd>(7g)</dd>
                </dl>
                <dl class="modal-specifications-right">
                  <dt>포화지방</dt>
                  <dd>(18.6g)</dd>
                  <dt>나트륨</dt>
                  <dd>(149mg)</dd>
                  <dt>카페인</dt>
                  <dd>(0mg)</dd>
                </dl>
              </div>
            </div>
          </div>
        </div>
      </li>
      <li class="card-drink-product">
        <div class="item-drink-product hover-trigger-area">
          <img src="../../assets/ediya-menu-modal/hot-brow.webp" alt="핫 브라우니 쇼콜라" />
          <h3 class="name-drink-product">HOT 브라우니 쇼콜라</h3>
          <div class="container-modal-drink-product">
            <div class="modal-drink-product">
              <button type="button" class="modal-close-btn" aria-label="닫기">&times;</button>
              <div class="modal-drink-name-description">
                <h3>HOT 브라우니 쇼콜라</h3>
                <h3>HOT Brow shocol</h3>
                <p>은은한 브라우니 향과 쇼콜라가 토핑된 다뜻하고 달달한 핫 브라우니 쇼콜라</p>
              </div>
              <div class="modal-specifications">
                <dl class="modal-specifications-left">
                  <dt>칼로리</dt>
                  <dd>(393kcal)</dd>
                  <dt>당류</dt>
                  <dd>(35g)</dd>
                  <dt>단백질</dt>
                  <dd>(7g)</dd>
                </dl>
                <dl class="modal-specifications-right">
                  <dt>포화지방</dt>
                  <dd>(18.6g)</dd>
                  <dt>나트륨</dt>
                  <dd>(149mg)</dd>
                  <dt>카페인</dt>
                  <dd>(0mg)</dd>
                </dl>
              </div>
            </div>
          </div>
        </div>
      </li>
    </ul>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const drinkCards = document.querySelectorAll('.card-drink-product');

        drinkCards.forEach(function (card) {
          const triggerArea = card.querySelector('.hover-trigger-area');
          const modalContainer = card.querySelector('.container-modal-drink-product');

          if (!triggerArea || !modalContainer) {
            return;
          }

          const modalItself = modalContainer.querySelector('.modal-drink-product');
          const closeButton = modalContainer.querySelector('.modal-close-btn');

          if (!modalItself || !closeButton) {
            return;
          }

          triggerArea.setAttribute('tabindex', '0');

          triggerArea.addEventListener('focusin', function () {
            modalContainer.style.display = 'block';
          });

          card.addEventListener('focusout', function (event) {
            setTimeout(() => {
              if (!card.contains(document.activeElement)) {
                if (!modalContainer.classList.contains('mobile-modal-active')) {
                  modalContainer.style.display = '';
                }
              }
            }, 0);
          });

          function openModalForMobile() {
            modalContainer.classList.add('mobile-modal-active');
            modalContainer.style.display = 'block';
          }

          function closeModalForMobile() {
            modalContainer.classList.remove('mobile-modal-active');
            modalContainer.style.display = '';
          }

          const handleMobileTriggerClick = () => {
            if (!window.matchMedia('(min-width: 768px)').matches) {
              openModalForMobile();
            }
          };

          const handleMobileCloseClick = (event) => {
            if (!window.matchMedia('(min-width: 768px)').matches) {
              event.stopPropagation();
              closeModalForMobile();
            }
          };

          function updateEventListenersByViewport() {
            triggerArea.removeEventListener('click', handleMobileTriggerClick);
            closeButton.removeEventListener('click', handleMobileCloseClick);

            if (window.matchMedia('(min-width: 768px)').matches) {
              if (modalContainer.classList.contains('mobile-modal-active')) {
                closeModalForMobile();
              }
            } else {
              triggerArea.addEventListener('click', handleMobileTriggerClick);
              closeButton.addEventListener('click', handleMobileCloseClick);
            }
          }

          updateEventListenersByViewport();
          window.addEventListener('resize', updateEventListenersByViewport);
        });
      });
    </script>
  </body>
</html>
